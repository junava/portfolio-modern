<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tetris</title>
    <link rel="stylesheet" href="tetris/tetris.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
  html, body {
    height: 100%;
    margin: 0;
    padding: 0;
  }
  .game-container {
    max-height: 100vh;;
  }
</style>
    <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@350;400;500;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500&display=swap" rel="stylesheet">
  <link rel="icon" href="../tetris/tetris-favicon.png">
</head>
<body>
  <!-- Magnetic cursor -->
  <div class="cursor" id="cursor"><span>+</span></div>
        <!-- theme toggle - single button -->
<button class="theme-toggle" id="themeToggle" aria-label="Switch theme">
  <span class="theme-icon light-icon">○</span>
  <span class="theme-icon dark-icon">●</span>
</button>

    <div class="game-container">
        <!-- Left panel -->
        <div class="panel left-panel">
            <div class="panel-box">
                <div class="panel-title">HOLD</div>
                <canvas id="hold" width="100" height="100"></canvas>
            </div>
            <div class="panel-box">
                <div class="panel-title">SCORE</div>
                <div id="score" class="panel-value">0</div>
            </div>
            <div class="panel-box">
                <div class="panel-title">LINES</div>
                <div id="lines" class="panel-value">0</div>
                <div class="progress-bar"><div id="progress" class="progress-fill"></div></div>
            </div>
            <div class="panel-box">
                <div class="panel-title">LEVEL</div>
                <div id="level" class="panel-value">1</div>
            </div>
            <div class="panel-box">
                <div class="mode-selector">
                    <button id="mode-endless" class="mode-btn active">Endless</button>
                    <button id="mode-sprint" class="mode-btn">Sprint (40L)</button>
                </div>
                <button id="controls-btn" class="control-btn">Controls</button>
            </div>
        </div>

        <!-- Center play area -->
        <div class="play-area">
            <div id="status" class="game-status">Ready</div>
            <canvas id="game" width="300" height="600"></canvas>
            <div class="game-buttons">
                <button id="start-btn" class="btn primary">Start</button>
                <button id="pause-btn" class="btn">Pause</button>
                <button id="reset-btn" class="btn">Reset</button>
            </div>
        </div>

        <!-- Right panel – stats at top, preview below -->
        <div class="right-panel">
            <div class="stats-row">
                <div class="stat-item">
                    <span class="stat-label">TIME</span>
                    <span id="time" class="stat-value">00:00</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">PPS</span>
                    <span id="pps" class="stat-value">0.00</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">COMBO</span>
                    <span id="combo" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">B2B</span>
                    <span id="b2b" class="stat-value">0</span>
                </div>
            </div>
            <div class="panel-box">
                <div class="panel-title">NEXT</div>
                <canvas id="next" width="100" height="100"></canvas>
            </div>
            <div class="panel-box">
                <div class="panel-title">PREVIEW</div>
                <canvas id="preview-queue" width="120" height="400"></canvas>
            </div>
        </div>
    </div>

    <!-- Controls modal (hidden by default) -->
    <div id="controls-modal" class="modal">
        <div class="modal-content">
            <h2>Controls & Settings</h2>
            <div id="controls-list" class="controls-grid"></div>
            <div class="slider-row">
                <div class="slider-group">
                    <label>DAS: <span id="das-value">100</span> ms</label>
                    <input type="range" id="das-slider" min="0" max="300" value="100">
                </div>
                <div class="slider-group">
                    <label>ARR: <span id="arr-value">16</span> ms</label>
                    <input type="range" id="arr-slider" min="0" max="100" value="16">
                </div>
            </div>
            <div class="modal-buttons">
                <button id="save-controls" class="btn primary">Save</button>
                <button id="close-controls" class="btn">Close</button>
                <button id="reset-defaults" class="btn">Reset Defaults</button>
            </div>
        </div>


    </div>
    <script src="tetris/tetris.js"></script>
    <script>
    (function() {
      "use strict";

      // ----- 1. Magnetic cursor (instant follow) -----
      const cursor = document.getElementById('cursor');
      const magneticElements = document.querySelectorAll(
        '.magnetic-target, button, .btn, .mode-btn, .control-btn, .theme-toggle'
      );

      if (cursor) {
        // Move cursor with mouse (instant)
        window.addEventListener('mousemove', (e) => {
          cursor.style.left = e.clientX + 'px';
          cursor.style.top = e.clientY + 'px';
        });

        // Hover effects
        magneticElements.forEach(el => {
          el.addEventListener('mouseenter', () => {
            cursor.classList.add('hover');
            const span = cursor.querySelector('span');
            if (span) {
              span.style.transform = 'rotate(90deg) scale(1.4)';
            }
          });
          el.addEventListener('mouseleave', () => {
            cursor.classList.remove('hover');
            const span = cursor.querySelector('span');
            if (span) {
              span.style.transform = 'rotate(0deg) scale(1)';
            }
          });
        });

        // Hide cursor when it leaves the window
        document.addEventListener('mouseleave', () => {
          cursor.style.opacity = '0';
        });
        document.addEventListener('mouseenter', () => {
          cursor.style.opacity = '1';
        });
      }

      // ----- 2. Theme toggle -----
      const themeToggle = document.getElementById('themeToggle');
      const body = document.body;

      function setTheme(mode) {
        if (mode === 'dark') {
          body.classList.add('dark');
          localStorage.setItem('theme', 'dark');
        } else {
          body.classList.remove('dark');
          localStorage.setItem('theme', 'light');
        }
      }

      // Load saved theme
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'light') {
        setTheme('light');
      } else {
        // default to dark
        setTheme('dark');
      }

      // Toggle on button click
      if (themeToggle) {
        themeToggle.addEventListener('click', () => {
          if (body.classList.contains('dark')) {
            setTheme('light');
          } else {
            setTheme('dark');
          }
        });
      }

      // Also update cursor color on theme change (optional – cursor color already handled by CSS)
    })();
  </script>
  <!-- ========== END STANDALONE JS ========== -->

</body>

</html> 
